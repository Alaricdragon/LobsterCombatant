[spoiler][/spoiler][img][/img][url][/url][code][/code]

so, you want to know how to use crew replacer, and its true potential?
well, lucky for you, this is the place to be.
in this tutorial we will be discussing:
1)a basic rundown of crew replacer, some common misconceptions and its limits. this includes:
    -why its called crew replacer at all.
    -what a 'crew' is in this context.
    -what is a 'job' in this context
    -what is a 'task' in this context
    -the things crew replacer can do
    -this things crew replacer cant do
1)how to add a crew to crew replacer. this includes:
    basic:
    -crew stats and what they do.
    -how to call a crew to a certain job.
    -how to use crew sets to put a crew in multiple jobs
    -load priority and blacklists, and how they work.
    -how to use crew replaces features, only if crew replacer is present (as such allowing one to use this mod without having it as a dependency)
    -
    advanced:
    //-everything about crews, crew sets, and the basics behind jobs.
    //-how to make your commodity a 'crew' for certain things.
    //-all the crew stats, and how they interact.
    -a overview of what a 'custom crew' is
    -a short description of the safety's installed in crew replacer to make 'custom crew' more stable
    -how each function of a 'custom crew' works
    -how to add your new 'custom crew' to a 'job'.
    -examples.
        -a 'crew' with more power when there is 'volatiles' in the cargo bay.
        -a 'crew' that's available amount is dependent on how many 'marines' you have in your cargo bay
        -a 'crew' that when 'ore' is available, 'ore' is lost when this 'crew' should have been.
        -a 'crew' that has a XP system (like marines)
        -a 'crew' named dave. the legendary doom pirate (with HP, and very high stats)
        -a 'crew' that's actually just a player skill.
        -a 'crew' that's a starship hullmod.
2)how to add a job to crew replacer, and why you would do it. this includes:
    -shameless self promotion about why crew replacer is great and the benefits of using it.
    -how to make your mod support crew replacer, without making it so the user requires it installed.
    -how to organize your crew sets and job names well, to avoid conflicts.
    -some examples of how you might make one of your modding 'jobs' use crew replacer.



[spoiler=a basic rundown of crew replacer, some common misconceptions and its limits]
[spoiler=why its called crew replacer at all]
the name 'crew replacer' is a kind of relic. when i was first developing this library, my only objective was to create a kind of 'substitute' for crew in certain tasks (like salvaging).
however i quickly realized that 'crew replacer' could be used to change any other commodity in a given task just as easily as 'crew'. so i did it.
so ya. crew replacer is not just for crew. its for every commodity in every event i can edit.
a more appropriate name now in days would be 'commodity task manager' or something, but i quite like crew replacer. so im keeping the name.
[/spoiler]
[spoiler=what a 'crew' is in this context]
a 'crew' in 'crew replacer' does not reference a normal in game 'crew'. it references the 'crewReplacer_Crew' class, wish acts as a representation of a commodity or something else in a 'job'.
a 'crew' has 'stats' built into the class that can be used to determine a 'crew's losses, ability to do things, and the order a 'crew' is used in.
every one of a 'crew's functions are also built to be overridden by modders, allowing for a 'crew' to represent something that's not a commodity, although with some effort (see the 'advanced' section in 'how to add a crew to crew replacer')
[/spoiler]
[spoiler=what is a 'job' in this context]
a 'job' in crew replacer refers to the 'crewReplacer_Job' class. wish acts as a data storage and management for 'crew'. a 'job' generally replaces instances of a single commodity in single task.
this means that in cases were 2 different 'tasks' share a commodity that 'crew replacer' replaces, there will be 2 different 'job's. one for each commodity (example: surveying takes crew. salvaging takes crew. there is 2 'job's one named 'survey_crew' and one named 'survey_crew'. they don't share data at all)
if you want to add a 'crew' to every instance of a commodity crew replacer replaces, you will need to use a 'crew set'. this will be covered in the 'basic' section of 'how to add a crew to crew replacer'
a 'job's functions can be overwritten by modders the same way a 'crew's can. but be careful when you do so, as some of the functions are quite fragile. we will discuss this farther in the 'advanced' section of 'how to add a job to crew replacer, and why you would do it'
[/spoiler]
[spoiler=what is a 'task' in this context]
a 'task' in crew replacer, does not refers to any class or code. rather, it refers to any set of 'job's that all act on the same event.
for example, the 'jobs' 'salvage_crew', and 'salvage_heavyMachinery' both are for salvaging. so the 'task' of 'salvaging' is both of said jobs.
[/spoiler]
[spoiler=the things crew replacer can do]
is this section necessary? maybe replacer it with something else
[/spoiler]
[spoiler=this things crew replacer cant do]
is this section necessary? maybe replacer it with something else
[/spoiler]
[/spoiler]

some useful information that you might want:
[url=https://github.com/Alaricdragon/Crew_Replacer/tree/master/jars/src/desing/documentation]documentation[/url]
[spoiler=how to add a commodity to the game]
[url=https://fractalsoftworks.com/forum/index.php?topic=29612.msg434214#msg434214]Commodity's and you: a basic tutorial on the complete commodity experience[/url]
[/spoiler]

[spoiler=how to add a crew to crew replacer]
[spoiler=basic]
in this part of the tutorial, im going to cover only the most basics of crew replacer. it will only show you how to turn a 'commodity' into a 'crew'. this will likely be a little hand holdy, but i do recommend you read it. i will try to keep this short and to the point.
[spoiler=crew stats and what they do]
crew have 5 base stats, that can be edited. you can change said stats at any time.
[spoiler=String name]
the name of the crew represents the commodityID that this crew represents.
only one crew with a given name can exist in a job at a time. if 2 crews are added to a job with the same name, only one of them will be kept.
[/spoiler]
[spoiler=float crewPriority]
this value determines what order crew will be 'selected' for a job. mostly only effects what crew are lost.
the default value is 10 (there might be a bug i forgot to fix were the value is initialized as 0. this will be changed to 10 at some point, because all my code assumes 10 is the default value. i will remove this line when that is fixed.)
[/spoiler]
[spoiler=float crewLoadPriority]
this value comes into play when 2 crews with the same name are added to a job. when this happens, the one with the highest 'crewLoadPriority' will be kept, and the other discarded.
the default value is 0.
[/spoiler]
[spoiler=float crewPower]
this value represents how 'strong' this crew is at its job. a crew with a crewPower of 2 will be worth twice as mush as normal in job power calculations.
the default value is 1.
[/spoiler]
[spoiler=float crewDefence]
this value represents how resistant to losses this crew is at its job.
a crew with a crewDefence twice as high as its crewPower will take 1/2 the expected losses. one with 1/2 the crewDefence as its crewPower will take twice the number of expected losses.
[spoiler=advanced crewDefence]
it should be noted, in loss calculations, because the code will also calculate what crew was used (based on every crews crewPriority in said job) changing the crewDefence value to not be equal to its crewPower might result in interesting side effects.
example: if you set a crewDefence higher then its crewPower, and you have a job that removes 100% of the crews that are called in a job (example: colonisation uses all the crew, supply, and heavy machinery it calls) this can result in fewer of other crew losses then expected.
example: if you set a crewDefence lower then its crewPower, and you have a job that removes some random % of crew that are called (example: losses from salvaging) this can result in more of other things being removed then expected.
this is a expected and understood behaver, and will not be changed. please feel free to use the mechanics described however you want when designing your crews.
[/spoiler]
the default value is 1. (in cases were you create a new crew, if you only input the crewPower, the crewDefence will be set to the same value as the inputted crewPower.)
[/spoiler]
[/spoiler]
[spoiler=how to call a crew to a certain job]
first of all, im going to be using a commodity i created (that has a ID of 'LobsterCombatant_CombatLobster') as the 'crew' here in this tutorial: [url=https://fractalsoftworks.com/forum/index.php?topic=29612.msg434214#msg434214]Commodity's and you: a basic tutorial on the complete commodity experience[/url]
second, im going to import the crewReplacer.jar from the [url=https://fractalsoftworks.com/forum/index.php?topic=24249.0]crew replacer[/url] mod as a library.
third, im going to review the [url=https://github.com/Alaricdragon/Crew_Replacer/tree/master/jars/src/desing/documentation/jobs]documentation on 'task's and 'job's[url] and determine the job name that i want my crew to use.
now, im thinking my 'combat lobsters' should act as marines in raiding, so im going to add them to the appropriate job now, in my mod plugin, on application load.
[code]
@Override
public void onApplicationLoad() {
    crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1,10);
}
[/code]
now some things to note:
1) the 'onApplicationLoad'. I put my code here. why? because after the 'onApplicationLoad' phase of the game, crew replacer will organize all the relevent data on every single job.
   this is rather important. so, if you want to, for whatever reason, do -anything- with a 'crew' or a 'job' and cant put the code in 'onApplicationLoad' you MUST run the following after you are done making your changes:
   crewReplacer_Main.getJob("raiding_marines").organizePriority();
   (of course, change the inputted job name, to the name of the job you have changed)
   this will reorganize the job, and fix any potential issues that might arise.
2) the 'crewReplacer_Main'. I wont talk about it mush, but its basically a storage for 'jobs' and 'crewSets'. you should always call a 'job' or 'crewSet' through crewReplacer_Main, to avoid issues from hopping in rare cases.
3) the 'getJob'. 'getJob' is just a function that returns a job. feel free to change what is in the "" in this job, to whatever job ID you want.
4) the 'addNewCrew()' 'addNewCrew()' is the goto way to add a crew to a job or a crew set. feel free to replace the "LobsterCombatant_CombatLobster" with the ID of the commodity you want to add to your job.
5) the stats '1,10' is the crewPower and crewPriority. i made my CombatLobsters just as strong as a untrained marine. and they will be deployed at the same time as marines.

now, i dont like the stats, so im going to make some changes.
[code]
@Override
public void onApplicationLoad() {
    crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1.25f,2,0,10);
}
[/code]
what did i do here?
1) well, i increased the 'crewPower' stat to 1.25 (a marine has between 1 and 2 power, depending on there skill level).
2) I also added a new stat, crewDefence, and set it to 2. (a marine i think has between 1 and 1.2? 1.3? I don't remember... crewDefence. (and yes, this is in defiance to how everything else in the game is calculated))
3) I also added another new stat, loadPriority, and set it to the default value (0).
so in effect, the lobster is more capable then a untrained marine, but mush less strong then a fully trained marine. its also extremely tanky by comparison.

if you go into the game, you can actually test and see if this worked. you can be extra sure what you did worked by going somewhere were you can do this job (in my case, finding a planet to raid), and removing all the normal 'crew' from your inventory (in my case, marines) before trying.
[/spoiler]
[spoiler=how to use crew sets to put a crew in multiple jobs (AKA how to crewSet)]
a few things to note:
1) a 'crewSet' is a list of 'crew' that is added to multiple jobs / crewSets.
2) well there is a page in the documentation dedicated to crewSets, thats mostly to document modded crew sets. i will likely redo the base game 'crewSet' documentation sometime.
   what you need to know, is that crew sets follow a simple rule (for all vanilla and modded items)
   -if this 'job' replaces a commodity, it takes 'crew' from the 'crewSet' that's named as that's commodity id.
   what this means is that, if you add a 'crew' to the crewSet named 'ore' every job that represents 'ore' will get that 'crew'. for example.

[code]
@Override
public void onApplicationLoad() {
    crewReplacer_Main.getCrewSet("marines").addNewCrew("LobsterCombatant_CombatLobster",1.125f,1.5f,10,0);
    crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1.25f,2,10,0);
}
[/code]
some things to note:
    1) 'getCrewSet' works the same as 'getJob', but only for crewSets. same with 'addNewCrew'.
    2) I gave my combat lobsters different stats. this is important for this tutorial, but is not required at all.
    3) because the job 'raiding_marines' uses the crew set 'marines', my lobsters stats will be overwritten by my crew set.
       don't worry, there is a way around this, in the next section.

also, if you want to check if this worked, you can always simply remove the line adding your 'crew' to a certain 'job', and then go and see your 'crew' in action again.
[/spoiler]
[spoiler=load priority and blacklists, and how they work]
somethings to note:
    1) a 'BlackListCrew' is a special thing that can be added to 'job's and 'crewSet's the prevents a crew from being entered into a 'job'/'crewSet'
    2) 'load priority' represents how must crew replacer wants to respect the inputted 'crew' / 'BlackListCrew'.
now, to start, lets let my 'combat lobster' have its special stats when raiding again.
[code]
    @Override
    public void onApplicationLoad() {
        crewReplacer_Main.getCrewSet("marines").addNewCrew("LobsterCombatant_CombatLobster",1.125f,1.5f,10,0);
        crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1.25f,2,10,1);
    }
[/code]
what did i do here?
    1) I increased the 'load priority' of the crew I was adding to 'raiding_marines' from 0 to 1.
what did that do? it makes it so when crew replacer organizing and applys data from the crew sets, it will respect the 'crew' I added to the 'raiding_marines' job more then the one i added to the 'marines' 'crewSet'.
so long as my 'load priority' on my 'job' is higher then the one on my 'crewSet', my jobs 'crew' will not be overwritten by the 'crewSet'.
this also apply to other someone might try to add the same 'crew' to this job. this is useful when 2 moders add the same commodity to the same job, as it will no longer be dependent on load order to determine what 'crew' is accepted into the 'job'

now onto blacklists
[code]
@Override
public void onApplicationLoad() {
    crewReplacer_Main.getCrewSet("marines").addNewCrew("LobsterCombatant_CombatLobster",1.125f,1.5f,10,0);
    crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1.25f,2,10,1);
    crewReplacer_Main.getJob("Mission_hijack_marines").addBlackListCrew("LobsterCombatant_CombatLobster",1);
}
[/code]
so what happened here?
    1) I added a new line of code, that gets the job 'Mission_hijack_marines' and blacklists my 'combat lobster' from doing this job, at a 'load priority' of 1.
       this is important, because the crewSet "marines" includes the job "Mission_hijack_marines". but i don't want my lobsters to be able to do this job (on account of them being so cute and cuddly that they would draw to mush of a crowd and make it hard to steal anything, let alone a starship), but i do want them to use the 'marine' 'crew set'

keep in mind: if you are ever doing anything when something might effect a 'crew' in a given 'job' more then once, make sure the thing you want to keep has the highest 'load priority' to make sure no issues happen.
[/spoiler]
[spoiler=how to use crew replaces features, only if crew replacer is present (as such allowing one to use this mod without having it as a dependency)]
so, a common compliant i hear about crew replacer, is the fact in order to use it one needs to have it as a dependency. and i understand the dislike of that, as dependency suck.
so let me show you a way around this. in 1 easy steps.
1) add a if statement preventing code from running provided the 'crewReplacer' mod is not loaded.
[code]
    @Override
    public void onApplicationLoad() {
        if (Global.getSettings().getModManager().isModEnabled("aaacrew_replacer")) {
            crewReplacer_Main.getCrewSet("marines").addNewCrew("LobsterCombatant_CombatLobster",1.125f,1.5f,10,0);
            crewReplacer_Main.getJob("raiding_marines").addNewCrew("LobsterCombatant_CombatLobster",1.25f,2,10,1);
            crewReplacer_Main.getJob("Mission_hijack_marines").addBlackListCrew("LobsterCombatant_CombatLobster",1);
        }
    }
[/code]
and yes, it feels weird that this works for me to.
[/spoiler]
[/spoiler]
[spoiler=advanced]
[spoiler=a overview of what a 'custom crew' is]
so you might be wondering 'what is a custom crew, and why is this the 'advanced' section'?
well, its relatively simple.
a 'custom crew' is a crewReplacer_Crew that has one or more of its functions overwritten, with the goal of changing a crew in some way.
as a example: in the AI-Retrofits mod, i make it so 'salvage robots' operate better if there is a 'AI-Core' of some type in the players cargo bay.
the ability to do that is possible because i overwrite the function that determines the 'power' of each crew.
as for why this is in the advanced section? well this is something crew replacer is built for... its no were near as simple as just the basic section. you will understand soon.
if all you want is to have a commodity act as a 'crew' in a 'job' with non changing stats, please look to the basic section for how to accomplish this.
if you want to do something, and am unsure if its even possible?
well, here you go.
[/spoiler]
[spoiler=a short description of the safety's installed in crew replacer to make 'custom crew' more stable]
because we are going to be modifying the 'crewReplacer_Crew' class here, you might be worryed about doing something to crash the game here.
please don't worry to mush about that. the 'crewReplacer_Job' class (wish should be the only class the looks at any of the functions of the crewReplacer_Crew class) has very robust handling of the 'crewReplacer_Crew' class. with lots of 'try{}catch(){}' statements.
in a case were anything a 'crew' did causes a crash, it should output some thing to the log. and 'crewReplacer_Job' will simply treat your crew like it does not exist.
[/spoiler]
[spoiler=how each function of a 'custom crew' works]
so, before anything, i would like to link a link to both my [url=https://github.com/Alaricdragon/Crew_Replacer/blob/master/jars/src/data/scripts/crewReplacer_Crew.java]crewReplacer_Crew class[/url] and my [url=https://github.com/Alaricdragon/Crew_Replacer/blob/master/jars/src/desing/documentation/classes/crewReplacer_Crew]crewReplacer_Crew documentation[/url] on github.
please feel free to reference the 2 links there at any time to learn more about this class we are going to be modifying.
well i will try to keep this tutorial up to date, i might forget sometimes, so its important to be able to go into the documentation and look yourself if you feel like something is not working right.
now, in order to create a custom crew, we are going to need to overwrite the functions of 'crewReplacer_Crew'. so lets look at each one, and i will tell you when you should overwrite wish one, to the best of my ability.
[spoiler=functions you should not overwrite, and there functions.]
first of all, i would like to talk about some functions that are eather worthless to overwrite, and some that are -unwise- to overwrite, for whatever reason.
[spoiler=worthless to overwrite]
[spoiler=public void resetExtraData()]

[/spoiler]
[spoiler=setExtraData(Object newData)]

[/spoiler]
[spoiler=public void setExtraData(Object newData)]

[/spoiler]
[spoiler=public boolean hasTag(String tag)]

[/spoiler]
[spoiler=public void AddTag(String tag)]

[/spoiler]
[spoiler=public void RemoveTag(String tag)]

[/spoiler]
[/spoiler]
[spoiler=functions that are outdated, and you should ignore]
[spoiler=public void removeCrew(CampaignFleetAPI fleet,float CrewToLost)]

[/spoiler]
[spoiler=public float getCrewInFleet(CampaignFleetAPI fleet)]

[/spoiler]
[spoiler=public float getCrewPowerInFleet(CampaignFleetAPI fleet)]

[/spoiler]
[/spoiler]
[spoiler=functions you should never overwrite ever please don't you will break something]
[spoiler=public float getCargoSpacePerItem(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCargoSpaceUse(CargoAPI cargo, float amountOfCrew)]

[/spoiler]
[spoiler=public float getCargoSpaceUse(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getFuelSpacePerItem(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getFuelSpaceUse(CargoAPI cargo, float amountOfCrew)]

[/spoiler]
[spoiler=public float getFuelSpaceUse(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCrewSpacePerItem(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCrewSpaceUse(CargoAPI cargo, float amountOfCrew)]

[/spoiler]
[spoiler=public float getCrewSpaceUse(CargoAPI cargo)]

[/spoiler]
[/spoiler]
[/spoiler]
[spoiler=public float getCrewToLose(CargoAPI cargo,float crewUsed,float crewLost)]

[/spoiler]
[spoiler=public void removeCrew(CargoAPI cargo,float CrewToLost)]

[/spoiler]
[spoiler=public float getCrewInCargo(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCrewPowerInCargo(CargoAPI cargo)]

[/spoiler]
[spoiler=public String getDisplayName(CargoAPI cargo)]

[/spoiler]
[spoiler=public String getCrewIcon(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCrewPower(CargoAPI cargo)]

[/spoiler]
[spoiler=public float getCrewDefence(CargoAPI cargo)]

[/spoiler]
[spoiler=public void displayCrewAvailable(CargoAPI cargo, float numberOfItems, TextPanelAPI text)]

[/spoiler]
[spoiler=public void displayCrewLost(CargoAPI cargo,float numberOfItems, TextPanelAPI text)]

[/spoiler]
[spoiler=public void DisplayedCrewNumbers(CargoAPI cargo,float numberOfItems, TextPanelAPI text)]

[/spoiler]
[/spoiler]
[spoiler=how to add your new 'custom crew' to a 'job']
[/spoiler]
[spoiler=examples]
here im going to walk you though some examples of creating 'custom crew'. feel free to read what you want.
[spoiler=a 'crew' with more power when there is 'volatiles' in the cargo bay.]
[/spoiler]
[spoiler=a 'crew' that's available amount is dependent on how many 'marines' you have in your cargo bay]
[/spoiler]
[spoiler=a 'crew' that when 'ore' is available, 'ore' is lost when this 'crew' should have been]
[/spoiler]
[spoiler=a 'crew' that has a XP system (like marines)]
[/spoiler]
[spoiler=a 'crew' named dave. the legendary doom pirate (with HP, and very high stats)]
[/spoiler]
[spoiler=a 'crew' that's actually just a player skill]
[/spoiler]
[spoiler=a 'crew' that's a starship hullmod]
[/spoiler]
[/spoiler]
[/spoiler]
[/spoiler]






[spoiler=how to add a job to crew replacer, and why you would do it]
[/spoiler]
